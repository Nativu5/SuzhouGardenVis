<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>行政区 × 权属性质 × 保护/开放 - 苏州园林专题</title>
    <link rel="stylesheet" href="styles/main.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3-sankey@0.12.3/dist/d3-sankey.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="main-title">行政区 × 权属 × 保护/开放</h1>
            <p class="subtitle">对比苏州园林在不同行政区与权属性质下的保护程度与开放程度</p>
            <div style="margin-top:12px;">
                <a href="index.html" style="color:#fff;text-decoration:underline;font-weight:600;">返回主页面</a>
            </div>
        </header>

        <section class="filter-panel" style="margin-bottom:20px;">
            <div class="filter-group">
                <label for="metric-toggle">热力图指标：</label>
                <select id="metric-toggle">
                    <option value="protection">平均保护评分</option>
                    <option value="open">开放程度</option>
                    <option value="highShare">高等级占比</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="min-count">最小样本数筛选：</label>
                <input id="min-count" type="number" min="0" value="1" style="width:80px;padding:6px 8px;border:2px solid #e9ecef;border-radius:6px;">
            </div>
            <button id="apply-filter" class="reset-btn" style="margin-left:0;">应用</button>
        </section>

        <main class="charts-container">
            <section class="chart-card" style="grid-column: span 2;">
                <h3 class="chart-title">行政区 × 权属 保护/开放矩阵</h3>
                <div id="matrix-chart" class="chart"></div>
                <p style="margin-top:10px;color:#6c757d;font-size:0.9rem;">
                    色阶代表所选指标（默认为平均保护评分），圆点半径代表开放程度，右上角显示样本数。
                </p>
            </section>

            <section class="chart-card" style="grid-column: span 2;">
                <h3 class="chart-title">行政区 → 权属 → 开放情况 流向</h3>
                <div id="sankey-chart" class="chart"></div>
                <p style="margin-top:10px;color:#6c757d;font-size:0.9rem;">
                    Sankey 展示各行政区的园林如何分布到不同权属性质，再流向开放情况。连线宽度=园林数量，颜色按权属区分。
                </p>
            </section>
        </main>
    </div>

    <div id="tooltip" class="tooltip"></div>

    <script src="scripts/ownership-visualization.js"></script>
</body>
</html>
