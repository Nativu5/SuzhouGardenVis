# 苏州园林数据可视化 项目需求

## 1. 背景与目标
- 面向“园林保护研究者、游客”提供苏州园林数据的可视化展示与基础交互。
- 以数据大盘与地图为核心，帮助用户快速理解园林分布、规模、年代、开放情况等关键信息，形成可读的 Insights。
- 项目形态为可独立部署的纯前端单页应用（SPA）。

## 2. 目标用户与使用场景
- 园林保护研究者：关注整体分布、年代结构、保护等级、权属性质、开放情况等宏观指标，辅助研究与决策。
- 游客：快速查找园林名称、位置、开放状态、简介，便于规划参观。

## 3. 数据范围与约束
### 3.1 数据源
- 当前数据都在 `./public/dataset/` 目录下：
  - 主数据文件：`SuzhouGardenListFull.csv`
  - 辅助数据文件：`SuzhouDistricts.csv`（包含各区县的人口与面积数据）
- 禁止使用：`./archived` 目录下的旧数据与旧版可视化。
- 如需参考 `./archived` 中的文件，必须复制到项目目录下的非 archived 位置再使用，避免后续整理时被删除。

### 3.2 字段说明（来自 CSV 表头）
- 公布批次
- 名称
- 区县
- 地址
- 建造年代
- 面积（㎡）
- 权属性质
- 管理单位
- 保护状况
- 开放情况
- 当前用途
- 描述
- 经度
- 纬度
- 文保单位级别
- 世界遗产

### 3.3 数据处理要求
- 对经纬度接入高德 API，用于点位展示（可参考 archived/VIS 的实现）。
- 面积字段需要数值化并提供单位说明（㎡）。
- 建造年代、文保单位级别等字段需支持分组统计。
- 如果图片需展示，需明确图片命名与数据记录的映射规则（暂按园林“名称”匹配，不匹配则不展示）。
- 行政区边界优先通过 AMap DistrictSearch 获取；如需本地边界文件，可参考 `archived/VIS/suzhou_districts.json` 的结构生成新文件，避免直接依赖 archived 目录。

## 4. 功能需求

### 4.1 数据大盘与概览模式
- 指标卡：园林总数、开放园林数、世界遗产数、平均/总面积等。
- 图表类型约束：严格禁止折线图、饼形图。
- 概览叙事场景（固定选项，基于数据）：
  - 场景名称：空间集中与遗产核心
    - 叙事意义/目的：呈现园林在苏州各区县的集中程度与高等级保护的空间分布。
    - 需哪些数据：区县、文保单位级别、世界遗产、面积（㎡）、开放情况。
    - 图表：区县×文保单位级别分层柱状图；区县园林数量/总面积柱状图；世界遗产在区县分布柱状图。
    - 表格：世界遗产园林清单（名称、区县、开放情况）。
    - 筛选器：区县、文保单位级别、世界遗产、开放情况。
  - 场景名称：历史谱系与认定节奏
    - 叙事意义/目的：展示建设时期结构与认定批次的关系，观察不同年代的保护级别分布。
    - 需哪些数据：建造年代、公布批次、文保单位级别。
    - 图表：建设时期数量柱状图；建造年代×文保单位级别分层柱状图；公布批次×建造年代分层柱状图。
    - 表格：早期年代园林清单（名称、年代、文保级别）。
    - 筛选器：建造年代、公布批次、文保单位级别。
  - 场景名称：开放可达与权属/用途
    - 叙事意义/目的：解释开放性差异的结构性因素，识别权属与用途对可达性的影响。
    - 需哪些数据：权属性质、当前用途、开放情况、区县。
    - 图表：权属性质→开放情况桑基图；当前用途×开放情况分层柱状图；区县×开放情况分层柱状图。
    - 表格：未开放园林清单（名称、区县、权属性质、当前用途）。
    - 筛选器：权属性质、开放情况、当前用途、区县。
  - 场景名称：规模结构与资源配置
    - 叙事意义/目的：展示园林规模分布与开放性的关联，识别大型园林所在区域与时代。
    - 需哪些数据：面积（㎡）、区县、开放情况、建造年代。
    - 图表：面积区间直方图（按开放情况分层）；区县平均/总面积柱状图；建造年代平均面积柱状图。
    - 表格：面积 Top10 园林表（名称、面积、区县、开放情况）。
    - 筛选器：面积区间、区县、开放情况、建造年代。

### 4.2 地图可视化
- 地图范围：苏州市级范围，展示行政区边界与园林点位。
- 地图底图：集成高德地图（AMap JS API，可参考旧实现 archived/VIS）。
- 行政区展示：支持区县轮廓与分区统计（如园林数量或面积的分级着色）。
- 行政区点击：需要额外 polygon 图层或行政区边界数据支撑，建议按需加载以避免体积过大。
- 点位展示：基于经纬度进行标注；支持聚合/散点切换。
- 信息弹窗：点击点位显示名称、开放情况、简介摘要、面积、地址等。
- 地图与图表联动：地图点位与统计图同步过滤与高亮。

### 4.3 信息展示
- 列表/卡片视图展示园林基础信息（名称、区县、开放情况、简介摘要），用于探索模式。
- 详情面板展示更完整信息（描述、管理单位、文保单位级别等），用于探索模式。
- 若提供图片，则在卡片或详情中展示。
- 概览模式仅在主视图内通过悬停/提示展示信息，不使用右侧详情面板；场景表格放置在主视图内。

### 4.4 交互功能
- 搜索：仅探索模式提供，按名称关键词检索。
- 筛选：探索模式支持区县、建造年代、开放情况、文保单位级别、权属性质、世界遗产、当前用途、面积区间。
- 概览模式筛选：仅提供场景限定筛选器。
- 点选：地图点位或列表项点击后高亮并展示详情。
- 视图模式切换：提供“概览/探索”两种模式切换。
- 概览模式：中间主视图展示整体数据图表，采用预设叙事子集。
- 探索模式：中间主视图展示交互式地图。
- 模式切换：保留当前筛选条件，确保概览图表与探索地图共享数据状态。
- 概览模式叙事切换：提供下拉选择框切换主视图叙事主题（空间集中与遗产核心、历史谱系与认定节奏、开放可达与权属/用途、规模结构与资源配置）。
- 不包含：收藏、登录、持久化状态等功能。

## 5. 技术与架构要求
- 前端框架：优先使用 Vue（建议 Vue 3 + Vite）+ Tailwind CSS + TypeScript。
- 可视化：优先使用 D3 或成熟图表库（如 ECharts）进行统计图表绘制。
- 地图：集成高德地图 JS API；支持行政区与点位图层管理。
- 工程化：组件化设计、可复用图表与筛选组件；避免重复造轮子。
- 数据加载：本地 CSV 读取与解析（前端静态数据加载）。

## 6. 体验与设计要求
- 视觉风格：清晰、专业、易读，突出“数据洞察”。
- 页面布局：三栏式，左侧操作区 + 中间主视图 + 右侧详情区域（仅探索模式显示）。
- 中间主视图根据模式切换：
  - 概览模式：以图表与表格为主的整体叙事展示。
  - 探索模式：交互式地图为主。
- 仅支持桌面端浏览器。

## 7. 非功能性需求
- 可维护性：结构清晰、组件职责单一、文档化必要配置（如地图 Key）。
- 可部署：静态构建产物可直接部署至任意静态托管服务。
- 配置：高德地图 API Key 需从环境变量或配置文件注入。

## 8. 交付物与验收
- 交付物：完整 SPA 前端项目源码 + 可构建部署的产物。
